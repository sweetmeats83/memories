{% extends "base.html" %}
{% block content %}


<div class="flex items-center justify-center min-h-screen">
  <div class="text-center rounded-lg bg-white/30 p-10 backdrop-blur-md shadow-lg inline-block  animate-fadeIn w-full max-w-md">
    <h1 class="text-3xl font-bold mb-6 tracking-wider flex items-center justify-center gap-2">
      <span class="material-symbols-outlined">lock_reset</span> RESET PASSWORD
    </h1>
    <p class="text-gray-700 mb-4 text-sm">Enter your email address, and we'll send you a password reset link.</p>
    
    <form id="resetForm" class="space-y-6">
      <!-- Email Field -->
      <div class="relative">
        <input type="email" name="email" id="email" required
          class="peer w-full p-3 border-b-2 border-gray-300 bg-transparent placeholder-transparent focus:outline-none focus:border-orange-500 text-black">
        <label for="email"
          class="absolute left-3 -top-3.5 text-gray-700 text-sm transition-all peer-placeholder-shown:top-3.5 peer-placeholder-shown:text-gray-400 peer-placeholder-shown:text-base peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-orange-500">
          Email Address
        </label>
        <span class="material-symbols-outlined absolute right-2 top-3 text-gray-400">mail</span>
      </div>

      <!-- Send Reset Link Button -->
      <button id="resetBtn" type="submit"
        class="w-full bg-orange-500 text-white py-3 rounded-lg hover:bg-orange-600 transition-colors duration-300 flex items-center justify-center gap-2">
        <span class="material-symbols-outlined">send</span> Send Reset Link
      </button>

      <p class="mt-4 text-sm">
        <a href="/login" class="text-orange-600 hover:underline flex items-center justify-center gap-1">
          <span class="material-symbols-outlined">arrow_back</span> Back to login
        </a>
      </p>
    </form>
  </div>
</div>

<script>
document.getElementById("resetForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  
  const email = document.getElementById("email").value.trim();
  const button = document.getElementById("resetBtn");

  button.disabled = true;
  button.innerHTML = `<span class="material-symbols-outlined animate-spin">progress_activity</span> Sending...`;

  try {
    const res = await fetch("/auth/forgot-password", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ email }),
    });

    if (res.ok) {
      showNotification("✅ If this email exists, a reset link has been sent.", "success");
    } else {
      showNotification("❌ Unable to send reset link.", "error");
    }
  } catch (err) {
    showNotification("⚠️ Network error. Please try again.", "error");
  } finally {
    button.disabled = false;
    button.innerHTML = `<span class="material-symbols-outlined">send</span> Send Reset Link`;
  }
});
</script>
{% endblock %}
