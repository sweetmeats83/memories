{% extends "base.html" %}
{% block content %}
<section class="max-w-md mx-auto mt-24 p-6 bg-white/80 backdrop-blur border rounded-xl">
  {% if invalid %}
    <h1 class="text-2xl font-bold mb-2">Link invalid or expired</h1>
    <p class="mb-4">Please ask the sender for a new invite.</p>
    <a class="btn-outline" href="/login">Back to login</a>
  {% else %}
    <h1 class="text-3xl font-bold mb-4">Create your password</h1>
    <form method="post" class="space-y-4">
      <div>
        <label class="block text-lg mb-1">Email</label>
        <input class="w-full border rounded-lg p-3 text-lg" value="{{ email }}" disabled>
      </div>
      <div>
        <label class="block text-lg mb-1">Password</label>
        <div class="relative">
          <input id="pw" name="password" type="password" required minlength="8"
                 class="w-full border rounded-lg p-3 text-lg pr-12" />
          <button type="button" onclick="togglePw()" aria-label="Show password"
                  class="absolute right-2 top-2 text-sm border rounded px-2 py-1">Show</button>
        </div>
        <p class="text-sm mt-2">Use at least 8 characters. Keep it private.</p>
      </div>
      <button class="btn-outline w-full justify-center text-lg py-3">Continue</button>
      <p class="text-sm opacity-70 mt-3">Need help? Ask a family member or the person who invited you.</p>
    </form>
  {% endif %}
</section>
<script>
function togglePw(){ const i=document.getElementById('pw'); i.type = i.type==='password'?'text':'password'; }
</script>
{% endblock %}
